version: '3.4'

services:
  solr:
    image: solr:7
    ports:
     - "8983:8983"
    volumes:
      - data:/var/solr

  searchqueryservice:
    image: ${DOCKER_REGISTRY-}searchqueryservice
    build:
      context: .
      dockerfile: src/SearchQueryService/Dockerfile
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_URLS=https://+:443;http://+:80
      #- ASPNETCORE_Kestrel__Certificates__Default__Password=123456789
      #- ASPNETCORE_Kestrel__Certificates__Default__Path=/https/aspnetapp.pfx
    ports:
      - "8000:443" 
    #volumes:
     # - ~/.aspnet/https:/https:ro

  mocksearchresultsservice:
    image: ${DOCKER_REGISTRY-}mocksearchresultsservice
    build:
      context: .
      dockerfile: src/MockSearchResultsService/Dockerfile
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_URLS=https://+:443;http://+:80
     # - ASPNETCORE_Kestrel__Certificates__Default__Password=123456789
     # - ASPNETCORE_Kestrel__Certificates__Default__Path=/https/aspnetapp.pfx
    ports:
      - "8001:443" 
    #volumes:
      #- ~/.aspnet/https:/https:ro

volumes:
  data: